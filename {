Script started on Wed Nov 21 03:28:45 2018
                    app = docker.build("willbla/train-schedule")
                    app.inside {
                        sh 'echo $(curl localhost:8080)'
                    }
                }
            }
        }]0;cloud_user@kirilzayets1c:~/cicd-pipeline-train-schedule-git[?1034h[cloud_user@kirilzayets1c cicd-pipeline-train-schedule-git]$                     app = docker.build("willbla/tr ain-schedule")
bash: syntax error near unexpected token `('
]0;cloud_user@kirilzayets1c:~/cicd-pipeline-train-schedule-git[cloud_user@kirilzayets1c cicd-pipeline-train-schedule-git]$                     app.inside {
bash: app.inside: command not found
]0;cloud_user@kirilzayets1c:~/cicd-pipeline-train-schedule-git[cloud_user@kirilzayets1c cicd-pipeline-train-schedule-git]$                         sh 'echo $(curl localhost: 8080)'
sh: echo $(curl localhost:8080): No such file or directory
]0;cloud_user@kirilzayets1c:~/cicd-pipeline-train-schedule-git[cloud_user@kirilzayets1c cicd-pipeline-train-schedule-git]$                     }
bash: syntax error near unexpected token `}'
]0;cloud_user@kirilzayets1c:~/cicd-pipeline-train-schedule-git[cloud_user@kirilzayets1c cicd-pipeline-train-schedule-git]$                 }
bash: syntax error near unexpected token `}'
]0;cloud_user@kirilzayets1c:~/cicd-pipeline-train-schedule-git[cloud_user@kirilzayets1c cicd-pipeline-train-schedule-git]$             }
bash: syntax error near unexpected token `}'
]0;cloud_user@kirilzayets1c:~/cicd-pipeline-train-schedule-git[cloud_user@kirilzayets1c cicd-pipeline-train-schedule-git]$         }    }}[K
bash: syntax error near unexpected token `}'
]0;cloud_user@kirilzayets1c:~/cicd-pipeline-train-schedule-git[cloud_user@kirilzayets1c cicd-pipeline-train-schedule-git]$ 
]0;cloud_user@kirilzayets1c:~/cicd-pipeline-train-schedule-git[cloud_user@kirilzayets1c cicd-pipeline-train-schedule-git]$         }    }    }    }    sh 'echo $(curl localhost:88080)'[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[18Papp.inside {
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C = docker.build("willbla/traain-schedule")[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Csteps {[K
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C        app = docker.build("willbla/traain-schedule")[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[18P.inside {
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C = docker.build("willbla/traain-schedule")[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[18P.inside {
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C    sh 'echo $(curl localhost:88080)'[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[18Papp.inside {
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C    sh 'echo $(curl localhost:88080)'[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C}[K
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C}[K}[K}[K[K        }    }    }    }    sh 'echo $(curl localhost:88080)'[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[18Papp.inside {
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C = docker.build("willbla/traain-schedule")[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Csteps {[K
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C}[K    branch 'master'when {[K[11@stage('Build Docker Image')[C[Cls[Ksudo docker buil -t kirylzayets/train-schedule .[8Plogin --username=kirylzayets[5P[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C --email kiril.zzayets@gmail.com[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[K
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cls[Kdocker build -t kirylzayets/train-schedulels[Kcd cicd-pipeline-train-schedule-git/ls[Kcd cicd-pipeline-train-schedule-git/ls[Kdocker build -t kirylzayets/train-schedulels[Kdocker ls[Kdocker build -t kirylzayets/train-schedule .
Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Post http://%2Fvar%2Frun%2Fdocker.sock/v1.26/build?buildargs=%7B%7D&buildbinds=null&cachefrom=%5B%5D&cgroupparent=&cpuperiod=0&cpuquota=0&cpusetcpus=&cpusetmems=&cpushares=0&dockerfile=Dockerfile&labels=%7B%7D&memory=0&memswap=0&networkmode=default&rm=1&shmsize=0&t=kirylzayets%2Ftrain-schedule&ulimits=null: dial unix /var/run/docker.sock: connect: permission denied
]0;cloud_user@kirilzayets1c:~/cicd-pipeline-train-schedule-git[cloud_user@kirilzayets1c cicd-pipeline-train-schedule-git]$ docker build -t kirylzayets/train-schedule .[1@s[1@u[C[1@d[1@o[1@ 
[sudo] password for cloud_user: 
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 12.26 MBSending build context to Docker daemon 13.37 MBSending build context to Docker daemon 17.27 MBSending build context to Docker daemon 18.38 MBSending build context to Docker daemon  19.5 MBSending build context to Docker daemon 20.05 MBSending build context to Docker daemon 20.61 MBSending build context to Docker daemon 21.73 MBSending build context to Docker daemon 22.84 MBSending build context to Docker daemon 25.07 MBSending build context to Docker daemon 25.75 MB
Step 1/7 : FROM node:carbon
 ---> ce426dead114
Step 2/7 : WORKDIR /usr/src/app
 ---> Using cache
 ---> d9ddf66a7b8e
Step 3/7 : COPY package*.json ./
 ---> Using cache
 ---> bce15eaa4c00
Step 4/7 : RUN npm install
 ---> Using cache
 ---> 946334bc5d17
Step 5/7 : COPY . .
 ---> 17aa589bad07
Removing intermediate container de45bc08e77b
Step 6/7 : EXPOSE 8080
 ---> Running in 6c32b224b4b5
 ---> 73897cfa7d59
Removing intermediate container 6c32b224b4b5
Step 7/7 : CMD npm start
 ---> Running in 6641d644558c
 ---> 5b884f860213
Removing intermediate container 6641d644558c
Successfully built 5b884f860213
]0;cloud_user@kirilzayets1c:~/cicd-pipeline-train-schedule-git[cloud_user@kirilzayets1c cicd-pipeline-train-schedule-git]$ sudo docker push kirylzayets/train-schedule
The push refers to a repository [docker.io/kirylzayets/train-schedule]

[1A[2K0e75159bbdab: Preparing [1B
[1A[2K5352d55e4b6d: Preparing [1B
[1A[2Kd523ca0539b0: Preparing [1B
[1A[2K5f2593846c99: Preparing [1B
[1A[2Kffe23ee184fa: Preparing [1B
[1A[2K8f07508ca798: Preparing [1B
[1A[2K2227deef0967: Preparing [1B
[1A[2Kef1d68002aed: Preparing [1B
[1A[2K9f588df8baf6: Preparing [1B
[1A[2Ka878f75d8472: Preparing [1B
[1A[2Ke714d7d9bdc5: Preparing [1B
[1A[2K2eccc496e148: Preparing [1B[7A[2K8f07508ca798: Waiting [7B[6A[2K2227deef0967: Waiting [6B[5A[2Kef1d68002aed: Waiting [5B[4A[2K9f588df8baf6: Waiting [4B[3A[2Ka878f75d8472: Waiting [3B[2A[2Ke714d7d9bdc5: Waiting [2B[1A[2K2eccc496e148: Waiting [1B[9A[2K5f2593846c99: Pushing 3.072 kB[9B[10A[2Kd523ca0539b0: Pushing [>                                                  ]    512 B/27.57 kB[10B[10A[2Kd523ca0539b0: Pushing [==================================================>] 31.74 kB[10B[11A[2K5352d55e4b6d: Pushing [>                                                  ] 115.7 kB/9.689 MB[11B[12A[2K0e75159bbdab: Pushing [>                                                  ] 254.5 kB/23.67 MB[12B[12A[2K0e75159bbdab: Pushing [====>                                              ] 2.352 MB/23.67 MB[12B[11A[2K5352d55e4b6d: Pushing [===>                                               ] 729.6 kB/9.689 MB[11B[12A[2K0e75159bbdab: Pushing [=========>                                         ] 4.711 MB/23.67 MB[12B[12A[2K0e75159bbdab: Pushing [==============>                                    ]  7.07 MB/23.67 MB[12B[11A[2K5352d55e4b6d: Pushing [====>                                              ]   833 kB/9.689 MB[11B[12A[2K0e75159bbdab: Pushing [===================>                               ]  9.43 MB/23.67 MB[12B[12A[2K0e75159bbdab: Pushing [========================>                          ] 11.53 MB/23.67 MB[12B[12A[2K0e75159bbdab: Pushing [============================>                      ]  13.3 MB/23.67 MB[12B[11A[2K5352d55e4b6d: Pushing [====>                                              ] 930.4 kB/9.689 MB[11B[12A[2K0e75159bbdab: Pushing [================================>                  ] 15.39 MB/23.67 MB[12B[11A[2K5352d55e4b6d: Pushing [=====>                                             ] 1.034 MB/9.689 MB[11B[12A[2K0e75159bbdab: Pushing [====================================>              ] 17.13 MB/23.67 MB[12B[12A[2K0e75159bbdab: Pushing [======================================>            ] 18.33 MB/23.67 MB[12B[8A[2Kffe23ee184fa: Mounted from library/node [8B[11A[2K5352d55e4b6d: Pushing [=====>                                             ] 1.147 MB/9.689 MB[11B[12A[2K0e75159bbdab: Pushing [=========================================>         ] 19.82 MB/23.67 MB[12B[12A[2K0e75159bbdab: Pushing [============================================>      ] 21.28 MB/23.67 MB[12B[12A[2K0e75159bbdab: Pushing [================================================>  ] 22.73 MB/23.67 MB[12B[12A[2K0e75159bbdab: Pushing [==================================================>] 24.48 MB[12B[11A[2K5352d55e4b6d: Pushing [=======>                                           ]  1.47 MB/9.689 MB[11B[12A[2K0e75159bbdab: Pushing [==================================================>] 25.75 MB[12B[11A[2K5352d55e4b6d: Pushing [============>                                      ] 2.375 MB/9.689 MB[11B[11A[2K5352d55e4b6d: Pushing [===============>                                   ] 2.924 MB/9.689 MB[11B[9A[2K5f2593846c99: Pushed [9B[11A[2K5352d55e4b6d: Pushing [==================>                                ] 3.654 MB/9.689 MB[11B[10A[2Kd523ca0539b0: Pushed [10B[7A[2K8f07508ca798: Mounted from library/node [7B[11A[2K5352d55e4b6d: Pushing [====================>                              ] 4.062 MB/9.689 MB[11B[11A[2K5352d55e4b6d: Pushing [=========================>                         ] 5.001 MB/9.689 MB[11B[11A[2K5352d55e4b6d: Pushing [============================>                      ] 5.603 MB/9.689 MB[11B[11A[2K5352d55e4b6d: Pushing [===============================>                   ] 6.012 MB/9.689 MB[11B[11A[2K5352d55e4b6d: Pushing [================================>                  ] 6.304 MB/9.689 MB[11B[5A[2Kef1d68002aed: Mounted from library/node [5B[11A[2K5352d55e4b6d: Pushing [==================================>                ] 6.596 MB/9.689 MB[11B[11A[2K5352d55e4b6d: Pushing [======================================>            ] 7.516 MB/9.689 MB[11B[6A[2K2227deef0967: Mounted from library/node [6B[11A[2K5352d55e4b6d: Pushing [=========================================>         ] 8.113 MB/9.689 MB[11B[4A[2K9f588df8baf6: Mounted from library/node [4B[11A[2K5352d55e4b6d: Pushing [=============================================>     ] 8.826 MB/9.689 MB[11B[11A[2K5352d55e4b6d: Pushing [==================================================>] 9.759 MB[11B[11A[2K5352d55e4b6d: Pushing [==================================================>] 11.11 MB[11B[3A[2Ka878f75d8472: Mounted from library/node [3B[11A[2K5352d55e4b6d: Pushing [==================================================>] 11.82 MB[11B[1A[2K2eccc496e148: Mounted from library/node [1B[2A[2Ke714d7d9bdc5: Mounted from library/node [2B[12A[2K0e75159bbdab: Pushed [12B[11A[2K5352d55e4b6d: Pushed [11Blatest: digest: sha256:bdec1877996701ad0186b917df10b5c8c4583f4bb655fb946a3b680e67ef67b8 size: 2845
]0;cloud_user@kirilzayets1c:~/cicd-pipeline-train-schedule-git[cloud_user@kirilzayets1c cicd-pipeline-train-schedule-git]$ sudo docker push kirylzayets/train-schedulebuild -t kirylzayets/train-schedule .[5P[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C        }[K    }    }    }    sh 'echo $(curl localhost:88080)'[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[18Papp.inside {
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C = docker.build("willbla/traain-schedule")[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Csteps {[K
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C}[K    branch 'master'when {[K[11@stage('Build Docker Image')[C[Cls[Ksudo docker buil -t kirylzayets/train-schedule .[8Plogin --username=kirylzayets[5P[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C --email kiril.zzayets@gmail.com[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[K
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C --email kiril.zzayets@gmail.com[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[K
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Clogin --username=kirylzayets --email kiril.zzayets@gmail.com[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[K
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[5@sudo [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[5P[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C --email kiril.zzayets@gmail.com[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[K
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cls[Kdocker login --username=kirylzayets --email kiril.zzayets@gmail.com[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[K
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C --email kiril.zzayets@gmail.com[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[K
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cls[K
Dockerfile   app.js        [0m[38;5;27mdata[0m    [38;5;34mgradlew[0m       package-lock.json  [38;5;27mroutes[0m           {
Jenkinsfile  [38;5;27mbin[0m           [38;5;27mdist[0m    gradlew.bat   package.json       settings.gradle
README.md    build.gradle  [38;5;27mgradle[0m  [38;5;27mnode_modules[0m  [38;5;27mpublic[0m             [38;5;27mviews[0m
]0;cloud_user@kirilzayets1c:~/cicd-pipeline-train-schedule-git[cloud_user@kirilzayets1c cicd-pipeline-train-schedule-git]$ re
read                    reboot                  repomanage              resize
readarray               rebuild-jar-repository  repoquery               resize2fs
readelf                 recode-sr-latin         repo-rss                resizecons
readlink                rename                  reposync                resizepart
readonly                renice                  repotrack               restorecon
readprofile             repoclosure             repquota                return
realm                   repodiff                request-key             rev
realpath                repo-graph              reset                   
[cloud_user@kirilzayets1c cicd-pipeline-train-schedule-git]$ re[K[Kcp j[KJenkinsfile Jenkinsfile [K1
]0;cloud_user@kirilzayets1c:~/cicd-pipeline-train-schedule-git[cloud_user@kirilzayets1c cicd-pipeline-train-schedule-git]$ ls
Dockerfile    README.md  build.gradle  [0m[38;5;27mgradle[0m       [38;5;27mnode_modules[0m       [38;5;27mpublic[0m           [38;5;27mviews[0m
Jenkinsfile   app.js     [38;5;27mdata[0m          [38;5;34mgradlew[0m      package-lock.json  [38;5;27mroutes[0m           {
Jenkinsfile1  [38;5;27mbin[0m        [38;5;27mdist[0m          gradlew.bat  package.json       settings.gradle
]0;cloud_user@kirilzayets1c:~/cicd-pipeline-train-schedule-git[cloud_user@kirilzayets1c cicd-pipeline-train-schedule-git]$ rm Jenkinsfile
]0;cloud_user@kirilzayets1c:~/cicd-pipeline-train-schedule-git[cloud_user@kirilzayets1c cicd-pipeline-train-schedule-git]$ ls
Dockerfile    app.js        [0m[38;5;27mdata[0m    [38;5;34mgradlew[0m       package-lock.json  [38;5;27mroutes[0m           {
Jenkinsfile1  [38;5;27mbin[0m           [38;5;27mdist[0m    gradlew.bat   package.json       settings.gradle
README.md     build.gradle  [38;5;27mgradle[0m  [38;5;27mnode_modules[0m  [38;5;27mpublic[0m             [38;5;27mviews[0m
]0;cloud_user@kirilzayets1c:~/cicd-pipeline-train-schedule-git[cloud_user@kirilzayets1c cicd-pipeline-train-schedule-git]$ wi[K[Kc[Kvi Jenkinsfile
[?1049h[?1h=[2;1H½[6n[1;1H  [1;1H[1;47r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[47;1H"Jenkinsfile" [New File][>c[2;1H[94m~                                                                                                              [3;1H~                                                                                                              [4;1H~                                                                                                              [5;1H~                                                                                                              [6;1H~                                                                                                              [7;1H~                                                                                                              [8;1H~                                                                                                              [9;1H~                                                                                                              [10;1H~                                                                                                              [11;1H~                                                                                                              [12;1H~                                                                                                              [13;1H~                                                                                                              [14;1H~                                                                                                              [15;1H~                                                                                                              [16;1H~                                                                                                              [17;1H~                                                                                                              [18;1H~                                                                                                              [19;1H~                                                                                                              [20;1H~                                                                                                              [21;1H~                                                                                                              [22;1H~                                                                                                              [23;1H~                                                                                                              [24;1H~                                                                                                              [25;1H~                                                                                                              [26;1H~                                                                                                              [27;1H~                                                                                                              [28;1H~                                                                                                              [29;1H~                                                                                                              [30;1H~                                                                                                              [31;1H~                                                                                                              [32;1H~                                                                                                              [33;1H~                                                                                                              [34;1H~                                                                                                              [35;1H~                                                                                                              [36;1H~                                                                                                              [37;1H~                                                                                                              [38;1H~                                                                                                              [39;1H~                                                                                                              [40;1H~                                                                                                              [41;1H~                                                                                                              [42;1H~                                                                                                              [43;1H~                                                                                                              [44;1H~                                                                                                              [45;1H~                                                                                                              [46;1H~                                                                                                              [m[47;94H0,0-1[9CAll[1;1H[?12l[?25h[?25lz[47;94H1,1  [1;1H[?12l[?25h[?25l[47;1H[1m-- INSERT --[m[47;13H[K[47;94H1,1[11CAll[1;1Hpeline {
        agent any[2;18H[K[3;1H        stages {[3;17H[K[4;1H        stage('Build') {[4;25H[K[5;1H            steps {[5;20H[K[6;1H                echo 'Running build automation'[6;48H[K[7;1H                sh './gradlew build --no-daemon'[7;49H[K[8;1H                archiveArtifacts artifacts: 'dist/trainSchedule.zip'[8;69H[K[9;1H            }[9;14H[K[10;1H        }[10;10H[K[11;1H[K[12;1H        stage('Build Docker Image') {[12;38H[K[13;1H            when {[13;19H[K[14;1H                branch 'master'[14;32H[K[15;1H            }[15;14H[K[16;1H            steps {[16;20H[K[17;1H                script {[17;25H[K[18;1H                    app = docker.build("kirylzayets/train-schedule")[18;69H[K[19;1H                    app.inside {[19;33H[K[20;1H                        sh 'echo $(curl localhost:8080)'[20;57H[K[21;1H                    }[21;22H[K[22;1H                }[22;18H[K[23;1H            }[23;14H[K[24;1H        }[24;10H[K[25;1H        stage('Push Docker Image') {[25;37H[K[26;1H            when {[26;19H[K[27;1H                branch 'master'[27;32H[K[28;1H            }[28;14H[K[29;1H            steps {[29;20H[K[30;1H                script {[30;25H[K[31;1H                    docker.withRegistry('https://registry.hub.docker.com', 'dockerhub') {[31;90H[K[32;1H                        app.push("${env.BUILD_NUMBER}")[32;56H[K[33;1H                        app.push("latest")[33;43H[K[34;1H                    }[34;22H[K[35;1H                }[35;18H[K[36;1H         z[36;11H[K[47;94H36,10[36;10H[?12l[?25h[?25l[1;46r[1;1H[12M[1;47r[24;10H   }
        }[25;10H[K[26;1H        stage('DeployToProduction') {[26;38H[K[27;1H            when {[27;19H[K[28;1H                branch 'master'[28;32H[K[29;1H            }[29;14H[K[30;1H            steps {[30;20H[K[31;1H                input 'Deploy to Production?'[31;46H[K[32;1H                milestone(1)[32;29H[K[33;1H                withCredentials([usernamePassword(credentialsId: 'webser_login', usernameVariable: 'USERNAME',  [34;1HpasswordVariable: 'USERPASS')]) {[34;34H[K[35;21Hscript {[36;25Hsh "sshpass -p '$USERPASS' -v ssh -o StrictHostKeyChecking=no $USERNAME@$prod_ip \"dockk[37;1Her pull kirylzayets/train-schedule:${env.BUILD_NUMBER}\""[38;25Htry {[39;29Hsh "sshpass -p '$USERPASS' -v ssh -o StrictHostKeyChecking=no $USERNAME@$prod_ip \""[40;1Hdocker stop train-schedule\""[41;29Hsh "sshpass -p '$USERPASS' -v ssh -o StrictHostKeyChecking=no $USERNAME@$prod_ip \""[42;1Hdocker rm train-schedule\""[43;25H} catch (err) {[44;29Hecho: 'caught error: $err'[45;25H}[46;25Hsh "sshpass -z[47;94H[K[47;94H54,38[9CBot[46;38H[?12l[?25h[?25l[1;13H            sh 'echo $(curl localhost:8080)'[2;17H    }[2;22H[K[3;13H    }[4;13H}[4;14H[K[5;9H}[5;17H[K[6;9Hstage('Push Docker Image') {[6;37H[K[7;13Hwhen {[7;21H[K[8;17Hbranch 'master'[8;32H[K[9;13H}[9;21H[K[10;13Hsteps {[11;13H    script {[12;9H [11Cdocker.withRegistry('https://registry.hub.docker.com', 'dockerhub') {[13;9H                app.push("${env.BUILD_NUMBER}")[14;13H            app.push("latest")[15;17H    }[15;22H[K[16;13H    }[17;13H}[17;14H[K[18;9H}[18;17H[K[19;9Hstage('DeployToProduction') {[19;38H[K[20;13Hwhen {[20;25H[K[21;17Hbranch 'master'[21;32H[K[22;13H}[22;21H[K[23;13Hsteps {[24;13H    input 'Deploy to Production?'[25;9H [7Cmilestone(1)[26;9H        withCredentials([usernamePassword(credentialsId: 'webser_login', usernameVariable: 'USERNAME',  [27;1HpasswordVariable: 'USERPASS')]) {[28;17H    script {[28;29H[K[29;13H [11Csh "sshpass -p '$USERPASS' -v ssh -o StrictHostKeyChecking=no $USERNAME@$prod_ip \"dockk[30;1Her pull kirylzayets/train-schedule:${env.BUILD_NUMBER}\""[31;17H        try {[31;31H[K[32;17H            sh "sshpass -p '$USERPASS' -v ssh -o StrictHostKeyChecking=no $USERNAME@$prod_ip \""[33;1Hdocker stop train-schedule\""[33;30H[K[34;1H                            sh "sshpass -p '$USERPASS' -v ssh -o StrictHostKeyChecking=no $USERNAME@$prod_ip \""[35;1Hdocker rm train-schedule\""[35;28H[K[36;25H} catch (err) {[36;40H[K[37;1H                            echo: 'caught error: $err'[37;55H[K[38;25H}[38;26H[K[39;25Hsh "sshpass -p '$USERPASS' -v ssh -o StrictHostKeyChecking=no $USERNAME@$prod_ip \"dockk[40;1Her run --restart always --name train-schedule -p 8080:8080 -d kirylzayets/train-schedule:${env.BUILD_NUMBER}\""[41;21H}[41;29H[K[42;1H                }[42;18H[K[43;13H}[43;25H[K[44;11H}[44;29H[K[45;3H}[45;25H[K[46;1H}z[46;25H[K[47;94H[K[47;94H60,2[10CBot[46;2H[?12l[?25h[?25l[47;94H59[45;2H[?12l[?25h[?25l[47;95H8[44;2H[?12l[?25h[?25l[47;95H7[43;2H[?12l[?25h[?25l[47;95H6[42;2H[?12l[?25h[?25l[47;95H5[41;2H[?12l[?25h[?25l[47;95H4[39;2H[?12l[?25h[?25l[47;95H3[38;2H[?12l[?25h[?25l[47;95H2[37;2H[?12l[?25h[?25l[47;95H0[34;2H[?12l[?25h[?25l[47;94H45[26;2H[?12l[?25h[?25l[47;95H3[24;2H[?12l[?25h[?25l[47;95H1[22;2H[?12l[?25h[?25l[47;94H39[20;2H[?12l[?25h[?25l[47;95H7[18;2H[?12l[?25h[?25l[47;95H5[16;2H[?12l[?25h[?25l[47;95H3[14;2H[?12l[?25h[?25l[47;95H1[12;2H[?12l[?25h[?25l[47;95H0[11;2H[?12l[?25h[?25l[47;94H28[9;2H[?12l[?25h[?25l[47;95H7[8;2H[?12l[?25h[?25l[47;95H6[7;2H[?12l[?25h[?25l[47;95H5[6;2H[?12l[?25h[?25l[47;95H4[5;2H[?12l[?25h[?25l[47;95H3[4;2H[?12l[?25h[?25l[47;95H2[3;2H[?12l[?25h[?25l[47;95H1[2;2H[?12l[?25h[?25l[47;95H0[1;2H[?12l[?25h[?25l[1;46r[1;1H[L[1;47r[1;21Happ.inside {[47;94H[K[47;94H19,2[10C94%[1;2H[?12l[?25h[?25l[1;46r[1;1H[2L[1;47r[1;17Hscript {[2;21Happ = docker.build("kirylzayets/train-schedule")[47;94H[K[47;94H17,2[10C84%[1;2H[?12l[?25h[?25l[1;46r[1;1H[3L[1;47r[1;17Hbranch 'master'[2;13H}[3;13Hsteps {[47;94H[K[47;94H14,2[10C68%[1;2H[?12l[?25h[?25l[1;46r[1;1H[4L[1;47r[1;9H}[3;9Hstage('Build Docker Image') {[4;13Hwhen {[47;94H[K[47;94H10,2[10C50%[1;2H[?12l[?25h[?25l[1;46r[1;1H[3L[1;47r[1;17Hsh './gradlew build --no-daemon'[2;17HarchiveArtifacts artifacts: 'dist/trainSchedule.zip'[3;13H}[47;94H[K[47;94H7,2[11C35%[1;2H[?12l[?25h[?25l[1;46r[1;1H[2L[1;47r[1;13Hsteps {[2;17Hecho 'Running build automation'[47;94H[K[47;94H5,2[11C25%[1;2H[?12l[?25h[?25l[1;46r[1;1H[4L[1;47r[1;1Hpeline {[2;9Hagent any[3;9Hstages {[4;9Hstage('Build') {[47;94H[K[47;94H1,2[11CTop[1;2H[?12l[?25h[?25l[47;94H2,1[2;1H[?12l[?25h[?25l[47;94H3[3;1H[?12l[?25h[?25l[47;94H4,2[4;2H[?12l[?25h[?25l[47;94H5[5;2H[?12l[?25h[?25l[47;94H6[6;2H[?12l[?25h[?25l[47;94H7[7;2H[?12l[?25h[?25l[47;94H8[8;2H[?12l[?25h[?25l[47;94H9[9;2H[?12l[?25h[?25l[47;94H11,1[11;1H[?12l[?25h[?25l[47;95H2,2[12;2H[?12l[?25h[?25l[47;95H3[13;2H[?12l[?25h[?25l[47;95H4[14;2H[?12l[?25h[?25l[47;95H6[16;2H[?12l[?25h[?25l[47;95H7[17;2H[?12l[?25h[?25l[47;95H8[18;2H[?12l[?25h[?25l[47;95H9[19;2H[?12l[?25h[?25l[47;94H20[20;2H[?12l[?25h[?25l[47;95H1[21;2H[?12l[?25h[?25l[47;95H2[22;2H[?12l[?25h[?25l[47;95H4[24;2H[?12l[?25h[?25l[47;95H5[25;2H[?12l[?25h[?25l[47;95H6[26;2H[?12l[?25h[?25l[47;95H8[28;2H[?12l[?25h[?25l[47;95H9[29;2H[?12l[?25h[?25l[47;94H31[31;2H[?12l[?25h[?25l[47;95H2[32;2H[?12l[?25h[?25l[47;95H3[33;2H[?12l[?25h[?25l[47;95H4[34;2H[?12l[?25h[?25l[47;95H5[35;2H[?12l[?25h[?25l[47;95H6[36;2H[?12l[?25h[?25l[47;95H7[37;2H[?12l[?25h[?25l[47;95H8[38;2H[?12l[?25h[?25l[47;94H40[40;2H[?12l[